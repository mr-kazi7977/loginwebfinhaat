{"ast":null,"code":"import { FormBuilder } from '@angular/forms';\nimport { routes } from 'src/app/consts/routes';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/expansion\";\nimport * as i3 from \"@angular/material/table\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"src/app/service/auth.service\";\nimport * as i6 from \"ngx-toastr\";\nimport * as i7 from \"src/app/service/token-storage.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../shared/layout/layout.component\";\nimport * as i10 from \"@angular/material/button\";\n\nfunction DetailsComponent_tr_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.data.insureds[i_r2].name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.data.insureds[i_r2].fathername);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.data.insureds[i_r2].dateinsured);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.data.insureds[i_r2].relation);\n  }\n}\n\nexport let DetailsComponent = /*#__PURE__*/(() => {\n  class DetailsComponent {\n    constructor(router1, matExpansionModule, matTableModule, router, fb, auth, toastrService, tokenStorage) {\n      this.router1 = router1;\n      this.matExpansionModule = matExpansionModule;\n      this.matTableModule = matTableModule;\n      this.router = router;\n      this.fb = fb;\n      this.auth = auth;\n      this.toastrService = toastrService;\n      this.tokenStorage = tokenStorage;\n      this.data = [];\n      this.panelOpenState = false;\n      this.routers = routes;\n      this.back1 = [];\n      this.premium = null;\n      this.otpvalidated = true;\n    }\n\n    back() {\n      this.router1.navigate([this.routers.CDOT]).then();\n    }\n\n    getpremiumdetails() {\n      console.log(\"Premium for proposal ID:\" + this.proposalid);\n      this.auth.get('getPremiumDetails/' + this.proposalid).subscribe(resp => {\n        this.premium = resp;\n        console.log(\"Premium Details:\" + JSON.stringify(this.premium));\n      });\n    }\n\n    getdetails() {\n      // this.auth.get('getcoireq').subscribe((resp)=>{this.toldata=resp;\n      //   this.data2 = JSON.stringify(this.toldata);\n      //   console.log(\"coidataa.\"+this.data2)\n      //   if(this.data2.proposalid==this.data.proposalid)\n      //   {\n      //     return this.data2= this.toldata;\n      //   }\n      // })\n      this.data = this.tokenStorage.get(\"coidata\");\n      this.proposalid = this.tokenStorage.get(\"proposalid\");\n    }\n\n    ngOnInit() {\n      // this.getdetails();\n      this.data = JSON.parse(this.tokenStorage.get(\"coidata\"));\n      this.data2 = this.data;\n      console.log(\"Proposal Data:\" + this.data);\n      console.log(\"no of insured:\" + this.data.occupation);\n      this.proposalid = this.tokenStorage.get(\"proposalid\");\n      this.getpremiumdetails(); // this.data=JSON.parse(localStorage.getItem(\"savedata\"));\n      //  this.back1=JSON.parse(sessionStorage.getItem(\"backdata\"))\n      //  console.log(\"details back\"+JSON.stringify(this.back1))\n    }\n\n    adddate() {}\n\n    payment() {\n      this.auth.post('getpg/' + this.proposalid, \"\").subscribe(data => {\n        let resp = data;\n\n        if (this.otpvalidated) {\n          let f = document.createElement(\"form\");\n          f.setAttribute(\"method\", \"POST\");\n          f.setAttribute(\"action\", resp.pgUrl);\n          let i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"SourceCode\";\n          i.value = resp.source;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"PhoneNo\";\n          i.value = resp.phoneNo;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"Email\";\n          i.value = resp.email;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"OrderAmount\";\n          i.value = resp.amount;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"Currency\";\n          i.value = \"INR\";\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"secSignature\";\n          i.value = resp.signature;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"ReturnURL\";\n          i.value = resp.returnUrl;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"QuoteId\";\n          i.value = resp.quote;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"SubCode\";\n          i.value = \" \";\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"GrossPremium\";\n          i.value = resp.amount;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"FinalPremium\";\n          i.value = resp.amount;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"SourceTxnId\";\n          i.value = this.proposalid;\n          f.appendChild(i);\n          i = document.createElement(\"input\");\n          i.type = \"hidden\";\n          i.name = \"productinfo\";\n          i.value = resp.productInfo;\n          f.appendChild(i);\n          document.body.appendChild(f);\n          f.submit();\n        }\n      }); // this.auth.get('payment/'+this.proposalid).subscribe((data)=>{\n      //   console.log(\"payment confirmation:\"+JSON.stringify(data))\n      //   if (data && data.errorCode == 100) {\n      //     this.router1.navigate([this.routers.PAYMENT]).then();\n      //   }\n      //   });\n    }\n\n  }\n\n  DetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n    return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatExpansionModule), i0.ɵɵdirectiveInject(i3.MatTableModule), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.AuthService), i0.ɵɵdirectiveInject(i6.ToastrService), i0.ɵɵdirectiveInject(i7.TokenStorageService));\n  };\n\n  DetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailsComponent,\n    selectors: [[\"app-details\"]],\n    decls: 131,\n    vars: 19,\n    consts: [[1, \"body\"], [1, \"container\"], [\"hideToggle\", \"\", \"disabled\", \"\"], [2, \"text-align\", \"center\"], [1, \"col-6\"], [1, \"col-6\", \"center\"], [1, \"table\", \"text-center\"], [\"scope\", \"col\"], [1, \"bold\"], [\"multi\", \"\", 1, \"example-headers-align\"], [\"multi\", \"\", 1, \"example-headers-align\", 3, \"opened\", \"closed\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [3, \"opened\", \"closed\"], [1, \"row\"], [1, \"col-6\", \"text-center\", \"mt-2\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"RouterLink\", \"/dashboard\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n    template: function DetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-layout\")(1, \"ng-form\", 0)(2, \"div\", 1)(3, \"div\")(4, \"header\");\n        i0.ɵɵtext(5, \"Payment Details \\u092D\\u0941\\u0917\\u0924\\u093E\\u0928 \\u0935\\u093F\\u0935\\u0930\\u0923\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-expansion-panel\", 2)(7, \"mat-expansion-panel-header\")(8, \"mat-panel-title\", 3)(9, \"div\", 4);\n        i0.ɵɵtext(10, \" Number of Insured Person \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(13, \"table\", 6)(14, \"thead\")(15, \"tr\")(16, \"th\", 7);\n        i0.ɵɵtext(17, \"No\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\", 7);\n        i0.ɵɵtext(19, \"detail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\", 7);\n        i0.ɵɵtext(21, \"Amount\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(22, \"tbody\")(23, \"tr\")(24, \"td\", 7);\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"td\", 7);\n        i0.ɵɵtext(27, \"Net Premium\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"td\", 7);\n        i0.ɵɵtext(29);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"tr\")(31, \"td\", 7);\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"td\");\n        i0.ɵɵtext(34, \"GST\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"td\");\n        i0.ɵɵtext(36);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(37, \"tr\", 8)(38, \"td\");\n        i0.ɵɵtext(39);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"td\");\n        i0.ɵɵtext(41, \"Gross Premium\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"td\");\n        i0.ɵɵtext(43);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(44, \"mat-accordion\", 9)(45, \"mat-expansion-panel\", 10);\n        i0.ɵɵlistener(\"opened\", function DetailsComponent_Template_mat_expansion_panel_opened_45_listener() {\n          return ctx.panelOpenState = true;\n        })(\"closed\", function DetailsComponent_Template_mat_expansion_panel_closed_45_listener() {\n          return ctx.panelOpenState = false;\n        });\n        i0.ɵɵelementStart(46, \"mat-expansion-panel-header\")(47, \"mat-panel-title\");\n        i0.ɵɵtext(48, \" Insured Details \\u092C\\u0940\\u092E\\u093F\\u0924 \\u0935\\u093F\\u0935\\u0930\\u0923 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(49, \"table\", 11)(50, \"thead\")(51, \"tr\")(52, \"th\", 7);\n        i0.ɵɵtext(53, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"th\", 7);\n        i0.ɵɵtext(55, \"Father Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"th\", 7);\n        i0.ɵɵtext(57, \"DOB\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"th\", 7);\n        i0.ɵɵtext(59, \"Relationship\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(60, \"tbody\");\n        i0.ɵɵtemplate(61, DetailsComponent_tr_61_Template, 9, 4, \"tr\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(62, \"mat-expansion-panel\", 13);\n        i0.ɵɵlistener(\"opened\", function DetailsComponent_Template_mat_expansion_panel_opened_62_listener() {\n          return ctx.panelOpenState = true;\n        })(\"closed\", function DetailsComponent_Template_mat_expansion_panel_closed_62_listener() {\n          return ctx.panelOpenState = false;\n        });\n        i0.ɵɵelementStart(63, \"mat-expansion-panel-header\")(64, \"mat-panel-title\");\n        i0.ɵɵtext(65, \" Nominee Details \\u0928\\u093E\\u092E\\u093E\\u0902\\u0915\\u093F\\u0924 \\u0935\\u094D\\u092F\\u0915\\u094D\\u0924\\u093F \\u0935\\u093F\\u0935\\u0930\\u0923 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(66, \"table\", 11)(67, \"thead\")(68, \"tr\")(69, \"th\", 7);\n        i0.ɵɵtext(70, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(71, \"th\", 7);\n        i0.ɵɵtext(72, \"Gender\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(73, \"th\", 7);\n        i0.ɵɵtext(74, \"DOB\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"th\", 7);\n        i0.ɵɵtext(76, \"Age\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(77, \"th\", 7);\n        i0.ɵɵtext(78, \"Mobile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"th\", 7);\n        i0.ɵɵtext(80, \"Relationship\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(81, \"tbody\")(82, \"tr\")(83, \"td\");\n        i0.ɵɵtext(84);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(85, \"td\");\n        i0.ɵɵtext(86);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(87, \"td\");\n        i0.ɵɵtext(88);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(89, \"td\");\n        i0.ɵɵtext(90);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(91, \"td\");\n        i0.ɵɵtext(92);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(93, \"td\");\n        i0.ɵɵtext(94);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(95, \"mat-expansion-panel\", 13);\n        i0.ɵɵlistener(\"opened\", function DetailsComponent_Template_mat_expansion_panel_opened_95_listener() {\n          return ctx.panelOpenState = true;\n        })(\"closed\", function DetailsComponent_Template_mat_expansion_panel_closed_95_listener() {\n          return ctx.panelOpenState = false;\n        });\n        i0.ɵɵelementStart(96, \"mat-expansion-panel-header\")(97, \"mat-panel-title\");\n        i0.ɵɵtext(98, \" Address Details \\u092A\\u0924\\u0947 \\u0915\\u093E \\u0935\\u093F\\u0935\\u0930\\u0923 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(99, \"table\", 11)(100, \"thead\")(101, \"tr\")(102, \"th\", 7);\n        i0.ɵɵtext(103, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(104, \"th\", 7);\n        i0.ɵɵtext(105, \"City\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(106, \"th\", 7);\n        i0.ɵɵtext(107, \"State\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(108, \"th\", 7);\n        i0.ɵɵtext(109, \"District\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(110, \"th\", 7);\n        i0.ɵɵtext(111, \"Pincode\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(112, \"tbody\")(113, \"tr\")(114, \"td\");\n        i0.ɵɵtext(115);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(116, \"td\");\n        i0.ɵɵtext(117);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(118, \"td\");\n        i0.ɵɵtext(119);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(120, \"td\");\n        i0.ɵɵtext(121);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(122, \"td\");\n        i0.ɵɵtext(123);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(124, \"div\", 14)(125, \"div\", 15)(126, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function DetailsComponent_Template_button_click_126_listener() {\n          return ctx.back();\n        });\n        i0.ɵɵtext(127, \"Back\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(128, \"div\", 15)(129, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function DetailsComponent_Template_button_click_129_listener() {\n          return ctx.payment();\n        });\n        i0.ɵɵtext(130, \"Payment\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\" \", ctx.data.insureds.length, \" \");\n        i0.ɵɵadvance(13);\n        i0.ɵɵtextInterpolate(1);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.premium.netpremium);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(2);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.premium.gst);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(3);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.premium.grosspremium);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data.insureds);\n        i0.ɵɵadvance(23);\n        i0.ɵɵtextInterpolate(ctx.data.nomname);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.nomgender);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.nomDob);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.nomage);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.nommobile);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.nomirelation);\n        i0.ɵɵadvance(21);\n        i0.ɵɵtextInterpolate(ctx.data.address);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.city);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.state);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.district);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.pincode);\n      }\n    },\n    dependencies: [i8.NgForOf, i9.LayoutComponent, i10.MatButton, i2.MatAccordion, i2.MatExpansionPanel, i2.MatExpansionPanelHeader, i2.MatExpansionPanelTitle, i4.NgForm],\n    styles: [\"table[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;margin-top:10px}.back[_ngcontent-%COMP%]{margin-left:50px;margin-top:10px;width:100px;height:35px}.bold[_ngcontent-%COMP%]{font-weight:700}.pay[_ngcontent-%COMP%]{margin-left:870px;margin-top:10px;width:100px;height:35px}header[_ngcontent-%COMP%]{margin-bottom:10px}.body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:skyblue}.container[_ngcontent-%COMP%]{position:relative;max-width:1500px;width:100%;border-radius:6px;padding:30px;margin:10px 15px 0;background-color:#fff;box-shadow:0 5px 10px #0000001a}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{position:relative;font-size:20px;font-weight:600;color:#333}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;left:0;bottom:-2px;height:3px;width:27px;border-radius:8px;background-color:#4070f4}\"]\n  });\n  return DetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}