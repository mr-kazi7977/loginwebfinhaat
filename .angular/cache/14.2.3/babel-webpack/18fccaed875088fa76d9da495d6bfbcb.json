{"ast":null,"code":"import { routes } from 'src/app/consts/routes';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/auth.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"src/app/service/token-storage.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../shared/layout/layout.component\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/forms\";\n\nfunction PaymentComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\", 11)(2, \"p\")(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" Sorry, we are unable to process your payment at this time. Please retry later.Incase your amount is debited, it will be refunded in your bank account soon. \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction PaymentComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"Payment Failed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PaymentComponent_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"Payment Failed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PaymentComponent_span_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \"Payment Failed\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PaymentComponent_button_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_button_34_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.download());\n    });\n    i0.ɵɵtext(1, \"Download\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let PaymentComponent = /*#__PURE__*/(() => {\n  class PaymentComponent {\n    constructor(router1, auth, toastrService, tokenStorage, paramroute) {\n      this.router1 = router1;\n      this.auth = auth;\n      this.toastrService = toastrService;\n      this.tokenStorage = tokenStorage;\n      this.paramroute = paramroute;\n      this.routers = routes;\n      this.payreceipt = [];\n    } // paymentres = true;\n\n\n    getpayreceipt() {\n      // console.log(\"proposalID:\"+this.proposalid)\n      // if(this.proposalid=='0' || this.proposalid==null || this.proposalid==undefined || this.proposalid==\"null\"){\n      //   return this.paymentres=false\n      // }else{\n      this.auth.get('getpayreceipt/' + this.proposalid).subscribe(resp => {\n        this.payreceipt = resp; // console.log(\"pay..\" + JSON.stringify(resp))\n      }); //   return this.paymentres=true\n      // }\n    }\n\n    ngOnInit() {\n      this.paramroute.queryParams.subscribe(params => {\n        console.log(JSON.stringify(params)); // { orderby: \"price\" }\n\n        this.proposalid = params.proposalid;\n        this.policy = params.policy; // console.log(this.proposalid); // price\n        // console.log(\"policy\", this.policy);\n      }); //this.proposalid=this.tokenStorage.get(\"proposalid\");\n\n      this.getpayreceipt();\n    }\n\n    download() {\n      const downloaUrl = \"download/abhicovernote\";\n      const downloaUrl1 = `${environment.AUTH_API + downloaUrl}/${this.proposalid}`;\n      window.open(downloaUrl1, '_blank');\n    }\n\n    generatePolicy() {\n      this.auth.post('generatePolicy/' + this.proposalid, \"\").subscribe(data => {\n        if (data && data.errorCode == 100) {\n          this.getpayreceipt();\n        } else alert(\"unable to generate policy now.. try after some time..\"); //  this.toastrService.error(\"unable to generate policy now.. try after some time..\");\n\n      });\n    }\n\n  }\n\n  PaymentComponent.ɵfac = function PaymentComponent_Factory(t) {\n    return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.TokenStorageService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n  };\n\n  PaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PaymentComponent,\n    selectors: [[\"app-payment\"]],\n    decls: 35,\n    vars: 8,\n    consts: [[1, \"body\"], [1, \"row\", \"mb-2\"], [\"class\", \"container \", 4, \"ngIf\"], [1, \"container\", \"mt-2\"], [1, \"table\"], [\"scope\", \"col\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-3\", \"text-center\", \"mt-2\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [1, \"container\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [2, \"color\", \"red\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n    template: function PaymentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-layout\")(1, \"ng-form\", 0)(2, \"div\", 1);\n        i0.ɵɵtemplate(3, PaymentComponent_div_3_Template, 6, 0, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"table\", 4)(6, \"thead\")(7, \"tr\")(8, \"th\", 5);\n        i0.ɵɵtext(9, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\", 5);\n        i0.ɵɵtext(11, \"Details\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"tbody\")(13, \"tr\")(14, \"td\");\n        i0.ɵɵtext(15, \"Payment Reference Number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"td\");\n        i0.ɵɵtemplate(17, PaymentComponent_span_17_Template, 2, 0, \"span\", 6);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"tr\")(20, \"td\");\n        i0.ɵɵtext(21, \"Amount\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"td\");\n        i0.ɵɵtemplate(23, PaymentComponent_span_23_Template, 2, 0, \"span\", 6);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"tr\")(26, \"td\");\n        i0.ɵɵtext(27, \"Certificate Number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"td\");\n        i0.ɵɵtemplate(29, PaymentComponent_span_29_Template, 2, 0, \"span\", 6);\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"tr\")(32, \"div\", 7)(33, \"div\", 8);\n        i0.ɵɵtemplate(34, PaymentComponent_button_34_Template, 2, 0, \"button\", 9);\n        i0.ɵɵelementEnd()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.policy == \"0\");\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngIf\", ctx.policy == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.payreceipt == null ? null : ctx.payreceipt.payrefno, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.policy == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.payreceipt == null ? null : ctx.payreceipt.amount, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.policy == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.payreceipt == null ? null : ctx.payreceipt.certificateNumber, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.policy != 0);\n      }\n    },\n    dependencies: [i5.NgIf, i6.LayoutComponent, i7.MatButton, i8.MatIcon, i9.NgForm],\n    styles: [\".back[_ngcontent-%COMP%]{margin-left:500px;margin-top:10px;width:100px;height:35px}@media only screen and (max-width: 600px){.table[_ngcontent-%COMP%]{width:100%}}.body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-color:#fff4ee}.container[_ngcontent-%COMP%]{width:100%;border-radius:6px;padding:30px;margin:0 15px;background-color:#fff;box-shadow:0 5px 10px #0000001a}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{position:relative;font-size:20px;font-weight:600;color:#333}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;left:0;bottom:-2px;height:3px;width:27px;border-radius:8px;background-color:#4070f4}\"]\n  });\n  return PaymentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}