{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/auth.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../../../shared/layout/layout.component\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/paginator\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\n\nfunction PolicydetailComponent_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"InsuredName \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r21.insuredname, \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" InsuredAge \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r22.insuredage, \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" DOB \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r23.insureddob, \"dd-MM-yyyy\"), \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" mobile \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r24.insuredmobile, \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" InsuredRelation \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r25 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.relationshipMap.get(element_r25.insuredrelationfromprimary), \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" nomineename \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r26.nomineename, \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" Certificate \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r27 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r27.certificateNumber, \" \");\n  }\n}\n\nfunction PolicydetailComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" Receipt \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵlistener(\"click\", function PolicydetailComponent_td_30_Template_td_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r30);\n      const element_r28 = restoredCtx.$implicit;\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.receipt(element_r28.proposalid));\n    });\n    i0.ɵɵelement(1, \"i\", 28);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_th_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \" Download \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_td_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵlistener(\"click\", function PolicydetailComponent_td_33_Template_td_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r33);\n      const element_r31 = restoredCtx.$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.download(element_r31.proposalid));\n    });\n    i0.ɵɵelement(1, \"i\", 29);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PolicydetailComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 30);\n  }\n}\n\nfunction PolicydetailComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 31);\n  }\n}\n\nconst _c0 = function () {\n  return [5, 10, 20, 50, 70, 100];\n};\n\nexport let PolicydetailComponent = /*#__PURE__*/(() => {\n  class PolicydetailComponent {\n    constructor(auth, toastrService) {\n      this.auth = auth;\n      this.toastrService = toastrService;\n      this.displayedColumns = ['name', 'age', 'DOB', 'mobile', 'relation', 'nomineename', 'Receipt', 'Download'];\n      this.dataSource = new MatTableDataSource();\n      this.relationshipMap = new Map();\n      this.num = 192;\n    }\n\n    ngOnInit() {\n      this.findinsured();\n      this.getRelationship();\n    }\n\n    applyfilter(filtervalue) {\n      this.dataSource.filter = filtervalue.trim().toLowerCase();\n    }\n\n    findinsured() {\n      this.auth.getinsured(this.num).subscribe(res => {\n        console.log(\"response\", res);\n        this.dataSource = new MatTableDataSource(res);\n        this.dataSource.paginator = this.paginator;\n        this.dataSource.sort = this.sort;\n        console.log(this.dataSource);\n      });\n    }\n\n    download(proposalId) {\n      // this.auth.get('download/abhicovernote/'+proposalId).subscribe(data=>{\n      //   console.log(\"download cover note called\");\n      // });\n      const downloaUrl = \"download/abhicovernote\";\n      const downloaUrl1 = `${environment.AUTH_API + downloaUrl}/${proposalId}`;\n      window.open(downloaUrl1, '_blank');\n    }\n\n    getRelationship() {\n      this.auth.get(\"getrelationship\").subscribe(data => {\n        //console.log(\"nomrelation--\" + JSON.stringify(data));\n        let nmr = [];\n        nmr = data;\n\n        for (let index = 0; index <= nmr.length - 1; index++) {\n          this.relationshipMap.set(nmr[index].rcode, nmr[index].rname);\n        }\n      });\n    }\n\n    receipt(proposal) {\n      this.auth.get('getpayreceipt/' + proposal).subscribe(resp => {\n        this.payreceipt = resp;\n        console.log(\"pay..\" + JSON.stringify(this.payreceipt));\n\n        if (resp != null) {\n          this.toastrService.success(\"Payment Ref Number: \" + resp.payrefno, \"Amount Rs: \" + resp.amount);\n        } else {\n          this.toastrService.error('Payment has not done yet..');\n        }\n      });\n    }\n\n  }\n\n  PolicydetailComponent.ɵfac = function PolicydetailComponent_Factory(t) {\n    return new (t || PolicydetailComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ToastrService));\n  };\n\n  PolicydetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PolicydetailComponent,\n    selectors: [[\"app-policydetail\"]],\n    viewQuery: function PolicydetailComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatSort, 5);\n        i0.ɵɵviewQuery(MatPaginator, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      }\n    },\n    decls: 38,\n    vars: 6,\n    consts: [[1, \"row\", \"m-3\"], [1, \"container\"], [1, \"col-md-12\"], [\"type\", \"search\", \"placeholder\", \"Name,Mobile,policynumber\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\", \"keyup\"], [1, \"mat-elevation-z8\"], [\"mat-table\", \"\", 1, \"table\", \"table-striped\", 3, \"dataSource\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"class\", \"mat-header-cell\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \" mat-cell\", 4, \"matCellDef\"], [\"matColumnDef\", \"age\"], [\"mat-header-cell\", \"\", \"class\", \"mat-header-cell\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"DOB\"], [\"mat-cell\", \"\", \"class\", \" mat-celldob\", 4, \"matCellDef\"], [\"matColumnDef\", \"mobile\"], [\"matColumnDef\", \"relation\"], [\"matColumnDef\", \"nomineename\"], [\"matColumnDef\", \"Receipt\"], [3, \"click\", 4, \"matCellDef\"], [\"matColumnDef\", \"Download\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", \"aria-label\", \"Select page of periodic elements\", 3, \"pageSizeOptions\"], [\"paginator\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 1, \"mat-header-cell\"], [\"mat-cell\", \"\", 1, \"mat-cell\"], [\"mat-header-cell\", \"\", 1, \"mat-header-cell\"], [\"mat-cell\", \"\", 1, \"mat-celldob\"], [3, \"click\"], [1, \"fa\", \"fa-credit-card\", 2, \"font-size\", \"24px\", \"color\", \"#2da44a\"], [1, \"fa\", \"fa-download\", 2, \"font-size\", \"24px\", \"color\", \"#2c3b97\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function PolicydetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-layout\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function PolicydetailComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.name = $event;\n        })(\"keyup\", function PolicydetailComponent_Template_input_keyup_4_listener($event) {\n          return ctx.applyfilter($event.target.value);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"table\", 5);\n        i0.ɵɵelementContainerStart(7, 6);\n        i0.ɵɵtemplate(8, PolicydetailComponent_th_8_Template, 2, 0, \"th\", 7);\n        i0.ɵɵtemplate(9, PolicydetailComponent_td_9_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(10, 9);\n        i0.ɵɵtemplate(11, PolicydetailComponent_th_11_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(12, PolicydetailComponent_td_12_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(13, 11);\n        i0.ɵɵtemplate(14, PolicydetailComponent_th_14_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(15, PolicydetailComponent_td_15_Template, 3, 4, \"td\", 12);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(16, 13);\n        i0.ɵɵtemplate(17, PolicydetailComponent_th_17_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(18, PolicydetailComponent_td_18_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(19, 14);\n        i0.ɵɵtemplate(20, PolicydetailComponent_th_20_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(21, PolicydetailComponent_td_21_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(22, 15);\n        i0.ɵɵtemplate(23, PolicydetailComponent_th_23_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(24, PolicydetailComponent_td_24_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 15);\n        i0.ɵɵtemplate(26, PolicydetailComponent_th_26_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(27, PolicydetailComponent_td_27_Template, 2, 1, \"td\", 8);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(28, 16);\n        i0.ɵɵtemplate(29, PolicydetailComponent_th_29_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(30, PolicydetailComponent_td_30_Template, 2, 0, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(31, 18);\n        i0.ɵɵtemplate(32, PolicydetailComponent_th_32_Template, 2, 0, \"th\", 10);\n        i0.ɵɵtemplate(33, PolicydetailComponent_td_33_Template, 2, 0, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(34, PolicydetailComponent_tr_34_Template, 1, 0, \"tr\", 19);\n        i0.ɵɵtemplate(35, PolicydetailComponent_tr_35_Template, 1, 0, \"tr\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"mat-paginator\", 21, 22);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(28);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    dependencies: [i3.LayoutComponent, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i5.MatPaginator, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i7.DatePipe],\n    styles: [\"table[_ngcontent-%COMP%]{width:100%;overflow:scroll}@media only screen and (max-width: 600px){.mat-elevation-z8[_ngcontent-%COMP%]{width:100%;overflow:scroll}.mat-header-cell[_ngcontent-%COMP%]{width:100%;padding:12px}.mat-cell[_ngcontent-%COMP%]{width:100%;padding:15px}.mat-celldob[_ngcontent-%COMP%]{min-width:9rem}}\"]\n  });\n  return PolicydetailComponent;\n})();\nexport class relationships {}","map":null,"metadata":{},"sourceType":"module"}