{"ast":null,"code":"import { FormArray, FormBuilder, FormGroup } from '@angular/forms';\nimport { routes } from 'src/app/consts/routes';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"src/app/service/auth.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../shared/layout/layout.component\";\nimport * as i7 from \"@angular/material/expansion\";\nimport * as i8 from \"@angular/material/checkbox\";\n\nfunction DeclarationComponent_ng_container_9_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"section\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"input\", 20)(4, \"input\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.pedrecord[1] == null ? null : ctx_r3.pedrecord[1].question_detail, \" \");\n  }\n}\n\nfunction DeclarationComponent_ng_container_9_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"section\", 13);\n    i0.ɵɵelement(2, \"input\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"input\", 23);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.pedrecord[3] == null ? null : ctx_r4.pedrecord[3].question_detail, \" \");\n  }\n}\n\nfunction DeclarationComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0, 7);\n    i0.ɵɵelementStart(1, \"mat-accordion\")(2, \"mat-expansion-panel\", 8);\n    i0.ɵɵlistener(\"opened\", function DeclarationComponent_ng_container_9_Template_mat_expansion_panel_opened_2_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.panelOpenState = true);\n    })(\"closed\", function DeclarationComponent_ng_container_9_Template_mat_expansion_panel_closed_2_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.panelOpenState = false);\n    });\n    i0.ɵɵelementStart(3, \"mat-expansion-panel-header\");\n    i0.ɵɵelement(4, \"mat-panel-title\");\n    i0.ɵɵelementStart(5, \"mat-panel-description\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 9)(8, \"div\", 10)(9, \"div\", 11)(10, \"div\", 12)(11, \"section\", 13);\n    i0.ɵɵelement(12, \"input\", 14);\n    i0.ɵɵtext(13);\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelement(16, \"mat-checkbox\", 15)(17, \"input\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(18, DeclarationComponent_ng_container_9_div_18_Template, 5, 1, \"div\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 11)(20, \"div\", 12)(21, \"section\", 13);\n    i0.ɵɵelement(22, \"input\", 18);\n    i0.ɵɵelementStart(23, \"mat-checkbox\", 19);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(25, DeclarationComponent_ng_container_9_div_25_Template, 5, 1, \"div\", 17);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const dec_r1 = ctx.$implicit;\n    const u_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"expanded\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" Insured Person: \", ctx_r0.insureddata[u_r2].insuredname, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroupName\", u_r2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.pedrecord[0] == null ? null : ctx_r0.pedrecord[0].question_detail, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.pedrecord[0] == null ? null : ctx_r0.pedrecord[0].lang_one, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", dec_r1.controls[\"question1_answer\"].value == true);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.pedrecord[2] == null ? null : ctx_r0.pedrecord[2].question_detail, \" \\u00A0 \", ctx_r0.pedrecord[2] == null ? null : ctx_r0.pedrecord[2].lang_one, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", dec_r1.controls[\"question3_answer\"].value == true);\n  }\n}\n\nexport let DeclarationComponent = /*#__PURE__*/(() => {\n  class DeclarationComponent {\n    constructor(router, toastrService, auth, fb, formBuilder) {\n      this.router = router;\n      this.toastrService = toastrService;\n      this.auth = auth;\n      this.fb = fb;\n      this.formBuilder = formBuilder;\n      this.routers = routes;\n      this.pedrecord = [];\n      this.insureddata = [];\n      this.peddata = new ped();\n      this.name = [{\n        name: ''\n      }, {\n        name: ''\n      }]; // onsubmit(){\n      //   this.peddata.question_id=1\n      //   this.peddata.answer=this.form.get('diesesdetails').value\n      //   this.peddata.insured_id=this.form.get('womendetails').value\n      //   this.peddata.proposal_id=245\n      //   console.log(this.peddata.answer);\n      //   this.auth.post('coipeddata',this.peddata).subscribe(data=>{\n      //     console.log(data)\n      //   })\n      // }\n\n      this.hide = 0;\n      this.hide2 = 0;\n    }\n\n    ngOnInit() {\n      this.creatForm();\n      this.proposalid = sessionStorage.getItem(\"proposalid\");\n      this.getped(); //  alert(this.pedrecord[0]);\n\n      console.log(\"declaration controls\" + this.declaration.controls.length); // this.insureddata =JSON.parse(sessionStorage.getItem('insured'))\n      // alert(this.insureddata.length)\n\n      console.log(\"data\", this.insureddata); //     this.insureddata.forEach((item, i) => {\n      //       item = Object.assign(item, this.addDeclaration(i));\n      // });\n    }\n\n    creatForm() {\n      this.form = this.fb.group({\n        declaration: this.fb.array([])\n      });\n    }\n\n    savedata() {\n      var _a;\n\n      alert(JSON.stringify(this.form.value));\n      this.peddata.insured_id = 125;\n      this.peddata.proposal_id = 125;\n      this.peddata.question_id = 1;\n      this.peddata.answer = (_a = this.form.get('declaration')) === null || _a === void 0 ? void 0 : _a.value; // this.peddata.answer=this.form.value.declaration.value.answer;\n\n      this.auth.post('coipeddata', this.peddata).subscribe(data => {\n        console.log(\"declaration_data\" + data);\n        console.error(\"its error\", data);\n      });\n    } // 1663677569849\n\n\n    getinsuredByproposalid() {\n      this.auth.getcityById('insuredbyproposal/' + this.proposalid).subscribe(data => {\n        this.insureddata = data;\n        console.log(\"insured by proposal\", data); //  alert(this.insureddata.length)\n        //alert(data[0].insuredid)\n\n        this.addDeclaration(this.insureddata);\n      });\n    }\n\n    even(data) {\n      alert(data);\n      console.log(\"shahrukh\" + data);\n    }\n\n    declareFrom() {\n      return this.fb.group({\n        question1_id: [''],\n        question1_answer: [''],\n        question2_id: [''],\n        question2_answer: [''],\n        question3_id: [''],\n        question3_answer: [''],\n        question4_id: [''],\n        question4_answer: [''],\n        insuredid: [''],\n        proposalid: [''] // diesesdetails:[''],\n        // women:[''],\n        // womendetails:[''],\n\n      });\n    }\n\n    trackbyfunction(index, item) {\n      if (!item) {\n        return null;\n      } else {\n        // this.addDeclaration();\n        return index;\n      }\n    }\n\n    addDeclaration(data) {\n      console.log(\"add :\", data); // alert(\"add\") proposalid\n\n      var j = data.length;\n      var i;\n\n      for (i = 0; i < j; i++) {\n        let dform = this.declareFrom();\n        dform.patchValue({\n          insuredid: data[i].insuredid,\n          proposalid: data[i].proposalid,\n          question1_id: this.pedrecord[0].id,\n          question2_id: this.pedrecord[1].id,\n          question3_id: this.pedrecord[2].id,\n          question4_id: this.pedrecord[3].id\n        });\n        this.declaration.push(dform); //alert(\"pushed\")\n      }\n\n      console.log(\"add completed\");\n    }\n\n    get declaration() {\n      return this.form.get(\"declaration\");\n    }\n\n    show(data) {\n      // alert(JSON.stringify(data))    \n      this.hide = data + 1;\n    }\n\n    show2(d) {\n      // this.hide2=!this.hide2\n      this.hide2 = d + 1;\n    }\n\n    save() {\n      this.peddata = this.form.value.declaration;\n      this.auth.post('coipeddata', this.peddata).subscribe(data => {\n        console.log(data);\n        console.log(data.errorCode);\n\n        if (data && data.errorCode == 100) {\n          this.toastrService.success(data.errorMessage, 'Message');\n          this.router.navigate([this.routers.DETAILS]).then();\n        } else {\n          this.toastrService.error(data.errorMessage, 'Message');\n        }\n      });\n    }\n\n    getped() {\n      this.auth.get(\"peddetails\").subscribe(data => {\n        console.log(\"ped quation\", data);\n        this.pedrecord = data;\n        this.getinsuredByproposalid();\n      });\n    }\n\n  }\n\n  DeclarationComponent.ɵfac = function DeclarationComponent_Factory(t) {\n    return new (t || DeclarationComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i4.FormBuilder));\n  };\n\n  DeclarationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DeclarationComponent,\n    selectors: [[\"app-declaration\"]],\n    decls: 12,\n    vars: 2,\n    consts: [[1, \"body\"], [1, \"container\"], [1, \"form\", \"first\"], [1, \"details\", \"personal\"], [3, \"formGroup\"], [\"formArrayName\", \"declaration\", 4, \"ngFor\", \"ngForOf\"], [1, \"button1\", \"mt-3\", 2, \"border-radius\", \"7px\", 3, \"click\"], [\"formArrayName\", \"declaration\"], [1, \"mt-4\", 3, \"expanded\", \"opened\", \"closed\"], [1, \"row\", \"mt-2\"], [3, \"formGroupName\"], [\"id\", \"rcorners3\", 2, \"width\", \"100%\"], [1, \"input-field\"], [1, \"example-section\", \"m-2\"], [\"type\", \"hidden\", \"formControlName\", \"question1_id\"], [\"formControlName\", \"question1_answer\", 1, \"example-margin\"], [\"type\", \"hidden\", \"formControlName\", \"insuredid\"], [\"class\", \"input-field\", 4, \"ngIf\"], [\"type\", \"hidden\", \"formControlName\", \"question3_id\"], [\"formControlName\", \"question3_answer\", 1, \"example-margin\"], [\"type\", \"hidden\", \"formControlName\", \"question2_id\"], [\"type\", \"text\", \"value\", \"Details of Dieses\", \"formControlName\", \"question2_answer\", 1, \"w-75\"], [\"type\", \"hidden\", \"formControlName\", \"question4_id\"], [\"type\", \"number\", \"max\", \"9\", \"min\", \"0\", \"value\", \"\", \"formControlName\", \"question4_answer\"]],\n    template: function DeclarationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-layout\")(1, \"ng-form\", 0)(2, \"div\", 1)(3, \"header\");\n        i0.ɵɵtext(4, \"Personal Declaration \\u00A0 \\u0935\\u094D\\u092F\\u0915\\u094D\\u0924\\u093F\\u0917\\u0924 \\u0918\\u094B\\u0937\\u0923\\u093E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3)(7, \"div\")(8, \"form\", 4);\n        i0.ɵɵtemplate(9, DeclarationComponent_ng_container_9_Template, 26, 9, \"ng-container\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function DeclarationComponent_Template_button_click_10_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(11, \"Submit\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.declaration.controls);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.LayoutComponent, i7.MatAccordion, i7.MatExpansionPanel, i7.MatExpansionPanelHeader, i7.MatExpansionPanelTitle, i7.MatExpansionPanelDescription, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.MinValidator, i4.MaxValidator, i4.NgForm, i4.FormGroupDirective, i4.FormControlName, i4.FormGroupName, i4.FormArrayName, i8.MatCheckbox],\n    styles: [\"*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.box-sizing[_ngcontent-%COMP%]{width:100%}.space[_ngcontent-%COMP%]{margin-right:10px}.space[_ngcontent-%COMP%]{margin-left:50px}.body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-color:#fff4ee}#rcorners3[_ngcontent-%COMP%]{border:2px solid grey;border-radius:8px;margin-bottom:5px;padding:10px;width:100%}.details[_ngcontent-%COMP%]{min-height:500px}.container[_ngcontent-%COMP%]{position:relative;max-width:750px;width:100%;border-radius:6px;padding:30px;margin:30px 15px;background-color:#fff;box-shadow:0 5px 10px #0000001a}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{position:relative;font-size:20px;font-weight:600;color:#333}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;left:0;bottom:-2px;height:3px;width:27px;border-radius:8px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative;margin-top:15px;min-height:10px;background-color:#fff;overflow-y:scroll}.space1[_ngcontent-%COMP%]{margin-right:10px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{display:flex;width:calc(50% - 15px);flex-direction:column;margin:4px 0}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{outline:none;font-size:14px;font-weight:400;color:#333;border-radius:5px;border:1px solid #aaa;padding:0 15px;height:42px;margin:8px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .backBtn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:45px;max-width:100px;width:100%;border:none;outline:none;color:#fff;border-radius:5px;margin:25px 0;background-color:#4070f4;transition:all .3s linear;cursor:pointer}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnText[_ngcontent-%COMP%]{font-size:14px;font-weight:400}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#265df2}form[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.text-uppercase[_ngcontent-%COMP%]{font-size:13px;font-style:bold;color:#000}.button1[_ngcontent-%COMP%]{background-color:#2da44a;border:none;color:#fff;padding:8px 30px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:1s;cursor:pointer}.button1[_ngcontent-%COMP%]:hover{background-color:#2c3b97;color:#fff}\"]\n  });\n  return DeclarationComponent;\n})();\nexport class ped {}","map":null,"metadata":{},"sourceType":"module"}